# Plan: Stacked Image Preview Enhancements

This plan outlines the implementation of visual improvements to the `StackedImagePreview` widget.

### Part 1: Replace Border with Drop Shadow

*   **Phase 1.1: Implement Drop Shadow**
    *   [x] **Task 1.1.1:** In `nina-app/lib/widgets/stacked_image_preview.dart`, remove the `border` from the `BoxDecoration`.
    *   [x] **Task 1.1.2:** Add a `boxShadow` to the `BoxDecoration` to create a subtle drop shadow effect.
*   **Phase 1.2: Verification**
    *   [x] **Task 1.2.1:** Run `flutter build web` to ensure the application compiles without errors.
    *   [x] **Task 1.2.2:** Request user to run the app and confirm that the image stacks now have a drop shadow instead of a white border.

### Part 2: Implement Randomized Rotation and Offset

*   **Phase 2.1: Implement Seeded Randomness**
    *   [x] **Task 2.1.1:** In `nina-app/lib/widgets/stacked_image_preview.dart`, import `dart:math`.
    *   [x] **Task 2.1.2:** In the `build` method, create a `Random` instance seeded with the `hashCode` of the `imageUrls` list to ensure consistent "randomness".
    *   [x] **Task 2.1.3:** Modify the `Transform.rotate` widget and the `Positioned` widget's offsets to use small, random values generated by the seeded `Random` instance for each image in the stack. The randomness will be subtle.
*   **Phase 2.2: Verification**
    *   [x] **Task 2.2.1:** Run `flutter build web` to ensure the application compiles without errors.
    *   [x] **Task 2.2.2:** Request user to run the app and confirm that the image stacks now have a slight, unique, and consistent random rotation and offset.

### Part 3: Relocate Layout Toggle Button

*   **Phase 3.1: Move and Restyle Button**
    *   [x] **Task 3.1.1:** In `nina-app/lib/home_screen.dart`, remove the `IconButton` for toggling the layout from the `AppBar`.
    *   [x] **Task 3.1.2:** In the `Stack` widget that contains the image display, add a `Positioned` widget in the top-right corner.
    *   [x] **Task 3.1.3:** Inside the `Positioned` widget, add the `IconButton` and wrap it in a styled `Container` to give it a semi-transparent background, ensuring it's always visible.
*   **Phase 3.2: Verification**
    *   [x] **Task 3.2.1:** Run `flutter build web` to ensure the application compiles without errors.
    *   [x] **Task 3.2.2:** Request you to run the app and confirm the layout toggle button is now floating over the image area and functions correctly.
